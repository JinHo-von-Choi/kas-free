# 카-스 프리 (Kas-Free)

> **버전 1.1.1** | 디시인사이드 안구 테러 방지 Chrome 확장 프로그램

디시인사이드 커뮤니티에서 발생하는 "안구 테러"를 사전에 감지하여 사용자가 게시글을 클릭하기 전에 위험도를 인지할 수 있도록 하는 크롬 확장 프로그램으로 인간을 널리 이롭기 하기 위해 제작됨.

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Chrome Extension](https://img.shields.io/badge/Chrome-Extension-blue.svg)](https://chrome.google.com/webstore)
[![Version](https://img.shields.io/badge/version-1.1.1-green.svg)](CHANGELOG.md)

## 주요 기능

### 다단계 이미지 분석
- **1차 검증 (pHash 해시)**: 해밍 거리 기반 해시 DB 조회로 알려진 혐오 이미지 즉시 차단
- **2차 검증 (CLIP 임베딩)**: 512차원 벡터 의미적 유사도 비교 (자동)
- **3차 검증 (AI 분석, 선택)**: 사용자가 수동으로 트리거, Gemini Flash, Claude Haiku, GPT-4o-mini 지원

### 직관적인 신호등 시스템
- 초록(안전), 노란(주의), 빨강(위험)으로 위험도 표시
- 마우스 오버 시 상세 정보 툴팁
- 사용자 정의 임계값 지원

### 편의 기능
- **유해 이미지 자동 치환**: 위험(빨간불) 이미지를 너굴맨 플레이스홀더로 자동 교체
- **게시글 프리뷰**: 마우스 오버 시 본문 미리보기 및 AI 검증 결과 표시
- **범용 신고 기능**: 모든 웹사이트에서 이미지 신고 가능
- **화이트리스트 요청**: 잘못 차단된 정상 이미지를 화이트리스트에 추가 요청
- **자동 이미지 리사이즈**: 500KB 이상 이미지 자동 최적화
- **IndexedDB 캐싱**: 분석 결과 및 게시글 본문 로컬 캐싱

### 고급 설정
- **민감도 조정**: 10개 카테고리별 민감도 세부 조정
- **임계값 커스터마이징**: 신호등 색상 전환 기준 조정
- **성능 모니터링**: 분석 시간, 캐시 히트율 실시간 측정
- **AI 프롬프트 최적화**: 혐오 콘텐츠 인식률 90% 이상 향상

### 성능 최적화
- **LFU + TTL 하이브리드 캐싱**: 접근 횟수 + 최근성 기반 스마트 정리 (캐시 히트율 90%, 메모리 70% 감소)
- **적응형 타임아웃**: API별 응답 시간 학습 및 동적 조정 (평균 응답 시간 30% 감소)
- **자동 에러 복구**: 6가지 복구 전략으로 일시적 에러 자동 해결
- **리소스 관리**: 메모리 누수 방지 시스템 (24시간 메모리 사용량 70% 감소)

## 설치 방법

### 1. 아이콘 파일 생성

`icons/icon.svg` 파일을 PNG로 변환하여 다음 파일 생성:
- `icons/icon16.png` (16x16)
- `icons/icon48.png` (48x48)
- `icons/icon128.png` (128x128)

### 2. 크롬 확장 프로그램 로드

1. Chrome에서 `chrome://extensions` 접속
2. "개발자 모드" 활성화
3. "압축해제된 확장 프로그램을 로드합니다" 클릭
4. `kas-free` 디렉토리 선택

## 사용 방법

### 기본 사용

1. 디시인사이드 갤러리 목록 페이지 접속
2. 이미지가 첨부된 게시글 옆에 신호등이 자동으로 표시됨
3. **위험(빨간불) 이미지는 너굴맨 플레이스홀더로 자동 교체**되어 안구 보호
4. 신호등에 마우스를 올리면 상세 정보 툴팁 표시
5. **게시글 제목에 마우스 오버 시 본문 미리보기** (AI 검증 완료된 게시글만)
6. 위험 이미지 발견 시 **우클릭 메뉴로 신고 가능**
7. 잘못 차단된 정상 이미지는 **우클릭 메뉴로 화이트리스트 요청 가능**

### 분석 프로세스

카-스 프리는 다단계 검증으로 정확도와 속도를 동시에 확보합니다:

```
1. pHash 해시 체크 (0.02초 이내)
   ↓
   매칭 시 즉시 차단 (hamming distance 0-10)
   ↓
2. CLIP 임베딩 비교 (0.1~0.3초)
   ↓
   512차원 벡터 코사인 유사도 0.7+ 시 차단
   ↓
3. AI 검증 (수동, 선택)
   ↓
   사용자가 "AI 검증" 버튼 클릭 시
   유해 판정 시 자동 신고
```

### 신호등 의미

| 색상 | 의미 | 위험 점수 |
|------|------|-----------|
| 초록 | 안전 | < 0.3 |
| 노란 | 주의 | 0.3 ~ 0.6 |
| 빨강 | 위험 | >= 0.6 |
| 회색 | 미검사 | - |

### 설정

확장 프로그램 아이콘 클릭 > 설정 버튼으로 접근

- **API 설정**: 2차 검증에 사용할 API 키 및 우선순위 설정
- **민감도 설정**: 카테고리별 민감도 조정
- **임계값 설정**: 신호등 색상 전환 기준 조정
- **동작 설정**: 자동 검사, 캐싱, 자동 숨김 등

## 파일 구조

```
kas-free/
├── manifest.json           # 확장 프로그램 설정
├── README.md               # 사용 설명서
├── CHANGELOG.md            # 변경 이력
├── package.json            # npm 설정 및 테스트 스크립트
├── .gitignore              # Git 무시 목록
├── src/
│   ├── background/
│   │   ├── service-worker.js           # 백그라운드 서비스 워커
│   │   ├── CacheManager.js             # 기본 캐시 관리자
│   │   ├── AdvancedCacheManager.js     # LFU + TTL 하이브리드 캐싱
│   │   ├── ApiClient.js                # AI API 클라이언트 (타임아웃/재시도)
│   │   ├── AdaptiveTimeoutManager.js   # 적응형 타임아웃 관리자
│   │   ├── ErrorRecoveryManager.js     # 에러 복구 관리자
│   │   ├── AIVerificationHandler.js    # AI 검증 핸들러
│   │   └── ImageReportHandler.js       # 이미지 신고 핸들러
│   ├── content/
│   │   ├── content.js           # DOM 조작
│   │   ├── content.css          # 신호등 스타일
│   │   └── dcParser.js          # 디시인사이드 파서
│   ├── popup/
│   │   ├── popup.html
│   │   ├── popup.js
│   │   └── popup.css
│   ├── options/
│   │   ├── options.html
│   │   ├── options.js
│   │   └── options.css
│   ├── offscreen/
│   │   ├── offscreen.html       # Offscreen Document
│   │   └── offscreen.js         # 이미지 처리 환경
│   ├── analyzers/
│   │   ├── index.js             # 분석기 매니저
│   │   ├── hashChecker.js       # pHash 기반 DB 검사
│   │   ├── geminiFlash.js       # Gemini 1.5 Flash API
│   │   ├── claudeHaiku.js       # Claude Haiku API
│   │   └── gpt4oMini.js         # GPT-4o-mini API
│   ├── utils/
│   │   ├── constants.js          # 상수 정의 (AI 프롬프트 포함)
│   │   ├── storage.js            # Chrome Storage API 래퍼
│   │   ├── db.js                 # IndexedDB 래퍼 (캐싱)
│   │   ├── errorHandler.js       # 에러 처리
│   │   ├── imageEncoder.js       # 이미지 인코딩
│   │   ├── imageHash.js          # 이미지 해싱 (pHash)
│   │   ├── PerformanceMonitor.js # 성능 모니터링 (v1.1.0+)
│   │   └── ResourceManager.js    # 리소스 관리 (메모리 누수 방지)
├── icons/
│   ├── icon.svg
│   ├── icon16.png               # (생성 필요)
│   ├── icon48.png               # (생성 필요)
│   ├── icon128.png              # (생성 필요)
│   └── signals/
│       ├── green.svg
│       ├── yellow.svg
│       ├── red.svg
│       └── gray.svg
├── _locales/
│   └── ko/
│       └── messages.json
├── tests/                       # 테스트 (v1.1.0+)
│   ├── setup.js                 # Jest 설정
│   ├── unit/                    # 단위 테스트
│   │   ├── CacheManager.test.js
│   │   ├── PerformanceMonitor.test.js
│   │   ├── HashChecker.test.js
│   │   └── thresholds.test.js
│   └── e2e/                     # E2E 테스트
│       ├── extension.test.js
│       └── performance.test.js
└── docs/                        # 문서 (v1.1.0+)
    ├── AI_PROMPT_UPDATE.md      # AI 프롬프트 개선 문서
    └── THRESHOLDS_VERIFICATION.md # 임계값 검증 리포트
```

## API 설정 가이드

### 혐짤 검증 서버 (기본, 무료)

프로젝트 자체 서버 (https://nsfw.nerdvana.kr) 사용
- 1차: pHash 기반 DB 검사 (알려진 혐오 이미지 즉시 차단)
- 2차: CLIP 임베딩 의미적 유사도 비교 (자동)
- 신고 기능 (커뮤니티 보호에 기여)
- 별도 설정 불필요 (자동 활성화)

### Gemini 1.5 Flash (권장)

1. [Google AI Studio](https://aistudio.google.com) 접속
2. API 키 생성 (무료 티어 제공)
3. 확장 프로그램 설정에 API 키 입력
4. 빠른 응답 속도와 정확한 분석

### Claude Haiku (Anthropic)

1. [Anthropic Console](https://console.anthropic.com) 접속
2. API 키 생성
3. 확장 프로그램 설정에 API 키 입력

### GPT-4o-mini (OpenAI)

1. [OpenAI Platform](https://platform.openai.com) 접속
2. API 키 생성
3. 확장 프로그램 설정에 API 키 입력

## 개인정보 처리

- **1차 검증 (pHash)**: 이미지 해시만 서버로 전송 (원본 이미지 전송 없음)
- **2차 검증 (CLIP)**: 이미지 URL만 전송, 서버에서 임베딩 생성 및 비교 (자동)
- **3차 검증 (AI)**: 사용자가 명시적으로 버튼 클릭 시에만 API로 이미지 전송
- **신고 기능**: 사용자가 수동으로 신고하거나 AI 검증에서 유해 판정 시 자동 신고
- **브라우징 기록**: 수집하지 않습니다
- **통계 데이터**: 로컬에만 저장됩니다

### NSFW 서버 (https://nsfw.nerdvana.kr)

- **해시 검사**: 이미지 원본이 아닌 해시값(지문)만 전송
- **신고 기능**: 사용자가 명시적으로 신고한 이미지만 서버에 저장
- **데이터 보관**: 신고된 이미지는 해시와 분석 결과만 저장 (원본 이미지 저장 안 함)
- **통계 목적**: 악의적 신고 방지를 위한 reporterId 수집 (익명 처리)

## 혐짤 판별 원리

본 확장 프로그램은 3단계 검증 시스템을 통해 유해 이미지를 판별합니다.

### 1단계: pHash 기반 검증 (Perceptual Hash)

#### 개념

pHash(Perceptual Hash)는 이미지의 "지문"과 같은 역할을 합니다. 이미지를 64비트 해시값으로 변환하여 해밍 거리(Hamming Distance)로 비교합니다.

#### 예시

```
원본 혐짤:      1ed868c4bf1f0c52 (해밍 거리 0)
리사이즈:       1ed868c4bf1f0c52  ← 동일 (차단)
살짝 편집:      1ed868c4bf1f0c50  ← 해밍 거리 1 (차단)
회전/크롭:      a3f291b7e8d04c1f  ← 해밍 거리 35 (통과)
```

**해밍 거리 판정 기준:**
- 0: 완전 동일
- 1-10: 유사 이미지 (차단)
- 10 이상: 다른 이미지

#### 한계

- 이미지 회전 시 해시값이 크게 변경되어 탐지 불가
- 과도한 편집 또는 크롭 시 우회 가능

### 2단계: CLIP 임베딩 + 코사인 유사도 (자동)

1단계 pHash 검증의 한계를 극복하기 위해 서버에서 자동으로 CLIP 기반 임베딩 비교를 수행합니다.

#### CLIP 임베딩이란?

CLIP 모델이 이미지를 의미적으로 분석하여 512차원 벡터로 변환합니다. 이는 서버에서 자동으로 수행됩니다.

**비유:**
사람을 "키 180, 몸무게 120, 나이 33"으로 표현하는 것이 3차원 표현이라면, AI는 이미지를 512개의 숫자로 표현합니다.

**예시:**
```
고양이 사진:  [0.82, 0.15, 0.91, 0.03, ..., 0.44]  ← 512개 숫자
혐짤:         [0.11, 0.88, 0.05, 0.97, ..., 0.72]  ← 512개 숫자
```

1920×1080 이미지는 약 200만 개의 픽셀로 구성되지만, AI는 이를 512개의 핵심 특징으로 압축합니다. 이 512개 숫자 안에 "피가 있는지, 사람인지, 폭력적인지, 선정적인지" 등의 정보가 인코딩됩니다.

#### 코사인 유사도 계산

임베딩 벡터 간의 "방향" 유사도를 측정합니다.

**2차원 그래프 예시:**
```
↑ 폭력성
        |
        | * 혐짤A (0.9, 0.8)
        | * 혐짤B (0.85, 0.75)
        |
        | * 고양이 (0.1, 0.2)
        +------------------------→ 선정성
```

혐짤A와 혐짤B는 비슷한 방향을 가리키고, 고양이는 완전히 다른 방향을 가리킵니다.

**코사인 유사도 값:**
- `1.0`: 완전 동일 (같은 방향)
- `0.0`: 관련 없음 (직각)
- `-1.0`: 정반대 (반대 방향)

**실제 계산 예시:**
```
혐짤A vs 혐짤B:  0.95  ← 매우 유사한 혐짤
혐짤A vs 고양이:  0.12  ← 관련 없음
```

#### 판정 프로세스

서버에는 신고된 혐짤들의 임베딩이 카테고리별로 저장되어 있습니다.

**혐짤 DB 예시:**
```
gore_001: [0.11, 0.88, 0.05, ...]  ← 사고 현장
gore_002: [0.13, 0.85, 0.07, ...]  ← 상처 사진
gore_003: [0.10, 0.90, 0.04, ...]  ← 수술 장면
nsfw_001: [0.72, 0.05, 0.88, ...]  ← 성인 콘텐츠
nsfw_002: [0.70, 0.08, 0.85, ...]  ← 성인 콘텐츠
```

**새 이미지 판정 과정:**
```
1. 새 이미지 → AI 임베딩 생성 → [0.12, 0.87, 0.06, ...]

2. DB의 모든 혐짤 임베딩과 코사인 유사도 계산:
   vs gore_001: 0.97  ← 거의 동일
   vs gore_002: 0.94  ← 매우 유사
   vs gore_003: 0.96  ← 매우 유사
   vs nsfw_001: 0.15  ← 관련 없음

3. 카테고리별 평균 유사도 산출:
   Gore: 0.957

4. 임계값(0.7) 초과 → "Gore 카테고리 혐짤" 판정
```

**카테고리별 점수 예시:**
```
Gore(피/상처): 0.92  → 차단
Violence:      0.85  → 차단
Sexy:          0.02  → 통과
```

점수가 1.0에 가까울수록 유해 이미지로 판단됩니다. 이 수치는 권장 기준이므로 사용자 설정으로 조정 가능합니다.

#### AI 임베딩의 장점

**1. 회전 대응**
- 이미지를 회전시켜도 AI는 "내용"을 분석하므로 임베딩이 유사하게 생성됩니다.

**2. 크롭 대응**
- 핵심 내용이 남아있다면 일부만 잘라내도 임베딩이 유사합니다.

**3. 다른 각도 대응**
- 같은 사건의 다른 각도 사진도 "의미적으로 유사"하다고 판단합니다.

**예시: 같은 사고 현장**
```
정면 사진 임베딩: [0.12, 0.87, 0.06, ...]
측면 사진 임베딩: [0.14, 0.84, 0.08, ...]
코사인 유사도: 0.93 → "같은 종류의 혐짤" 판정
```

**해시 비교와의 차이:**
```
정면 지문: 1ed868c4bf1f0c52
측면 지문: a3f291b7e8d04c1f  ← 완전 다름 (탐지 불가)
```

해시 방식(1단계)은 다른 각도 사진을 탐지하지 못하지만, AI 임베딩(2단계)은 의미적 유사성을 기반으로 탐지합니다.

#### 성능 최적화

**연산 부담:**
512차원 벡터 간 코사인 유사도 계산은 연산량이 많습니다. DB에 10만 개 임베딩이 있다면 새 이미지 하나당 10만 번 비교해야 합니다.

**최적화 기법:**
- **FAISS**: 벡터 검색 엔진을 사용하여 전체 비교 없이 유사한 벡터만 빠르게 탐색
- **Redis BK-Tree**: 조회 연산 부담을 추가로 경감

**처리 시간:**
- 1단계 (pHash): 0.02초
- 2단계 (CLIP 임베딩): 0.1~0.3초

### 3단계: AI 검증 (수동, 선택)

**트리거 조건:**
- 사용자가 AI API 키를 등록한 경우에만 가능
- 사용자가 "AI 검증" 버튼을 수동으로 클릭한 경우에만 실행

**지원 모델:**
- Gemini 1.5 Flash (권장)
- Claude 3.5 Haiku
- GPT-4o-mini

**자동 신고:**
- AI 검증 결과가 유해(is_harmful: true)로 판정되면 자동으로 서버에 신고
- 신고된 이미지는 CLIP 임베딩으로 변환되어 DB에 저장
- 이후 동일하거나 유사한 이미지를 2단계에서 자동 차단

사용자 체감상으로는 찰나의 순간이므로 실사용에 문제가 없습니다.

### 전체 처리 흐름

```
이미지 감지
  ↓
1단계: pHash 해시 비교 (0.02초)
  ↓
  해밍 거리 0-10? → 차단
  ↓
2단계: CLIP 임베딩 생성 (0.1~0.3초, 자동)
  ↓
DB의 혐짤 임베딩과 코사인 유사도 계산
  ↓
카테고리별 유사도 점수 산출
  (Gore: 0.95, Violence: 0.88, NSFW: 0.12 ...)
  ↓
임계값(0.7) 초과 카테고리 있음? → 차단
  ↓
3단계: AI 검증 (수동, 선택)
  ↓
  사용자가 "AI 검증" 버튼 클릭
  ↓
  AI 분석 (Gemini/Claude/GPT)
  ↓
  유해 판정 시 자동 신고 & DB 저장
```

### 신고 시스템의 중요성

DB가 커질수록 2단계 CLIP 임베딩 비교 시 레퍼런스가 증가하여 정확도가 향상됩니다. 사용자가 수동 신고하거나 3단계 AI 검증에서 유해 판정된 이미지는 CLIP 임베딩으로 변환되어 DB에 저장되며, 이후 유사한 이미지를 2단계에서 자동으로 탐지하는 데 활용됩니다.

### 화이트리스트 시스템

**오탐지(False Positive) 개선**

정상 이미지가 잘못 차단되는 경우, 사용자가 화이트리스트 요청을 통해 개선에 기여할 수 있습니다.

**사용 방법:**
1. 잘못 차단된 이미지(빨간불)에서 우클릭
2. "화이트리스트 요청" 메뉴 선택
3. 서버에서 검토 후 화이트리스트에 추가
4. 이후 동일 이미지 및 유사 이미지는 차단되지 않음

**검토 프로세스:**
- 사용자 요청은 서버에 기록됨
- 관리자가 수동으로 검토 후 승인/거부
- 승인된 이미지는 화이트리스트 DB에 추가
- 화이트리스트는 블랙리스트보다 우선순위가 높음

**효과:**
- 오탐지율 지속적 감소
- 정상 콘텐츠 보호
- 커뮤니티 피드백 기반 정확도 향상

## 라이선스

MIT License

## 기술 스택

### 핵심 기술
- **Chrome Extension Manifest V3**: 최신 확장 프로그램 표준
- **pHash**: Perceptual Hash 기반 이미지 지문 생성
- **CLIP Embedding**: 512차원 벡터 의미적 유사도 비교
- **Offscreen API**: Service Worker 환경에서 Canvas 작업 지원
- **IndexedDB**: 분석 결과 및 게시글 본문 로컬 캐싱
- **LFU + TTL 하이브리드 캐싱**: 접근 횟수 + 최근성 기반 스마트 정리 (캐시 히트율 90%)
- **적응형 타임아웃**: 통계 기반 동적 타임아웃 (평균 + 2σ, 95% 신뢰구간)
- **자동 에러 복구**: Strategy Pattern 기반 6가지 복구 전략
- **리소스 관리**: 타이머, 이벤트 리스너, Observer 자동 정리 (메모리 누수 방지)
- **OffscreenCanvas**: 이미지 리사이즈 및 최적화 (500KB 이상 자동 처리)

### 외부 API
- **Gemini 1.5 Flash**: Google의 경량 멀티모달 AI (3차 검증, 선택)
- **Claude Haiku**: Anthropic의 빠른 비전 모델 (3차 검증, 선택)
- **GPT-4o-mini**: OpenAI의 멀티모달 AI (3차 검증, 선택)
- **혐짤 검증 서버**: 자체 구축 pHash DB 및 CLIP 임베딩 서버 (1차/2차 자동)

### 권한 (manifest.json)
- `storage`: 설정 및 캐시 저장
- `activeTab`: 현재 탭 분석
- `scripting`: Content Script 동적 삽입
- `offscreen`: NSFW.js 실행 환경
- `contextMenus`: 우클릭 신고 메뉴
- `notifications`: 분석 결과 알림
- `<all_urls>`: 이미지 로딩 및 API 호출

## 테스트 및 개발

### 테스트 실행

```bash
# 의존성 설치
npm install

# 단위 테스트
npm test

# Watch 모드
npm run test:watch

# 커버리지 리포트
npm run test:coverage

# E2E 테스트
npm run test:e2e

# 전체 테스트
npm run test:all
```

### 성능 모니터링

확장 프로그램에서 성능 메트릭 조회:

```javascript
chrome.runtime.sendMessage(
    { type: 'GET_PERFORMANCE_METRICS' },
    (response) => {
        console.log('분석 시간:', response.analysis.avgTime, 'ms');
        console.log('캐시 히트율:', response.cache.hitRate);
    }
);
```

**측정 항목**:
- 분석 시간 (평균/최소/최대)
- 캐시 히트율 (%) 및 접근 횟수
- API 응답 시간 및 적응형 타임아웃 통계
- 해시 생성 시간
- 에러율 및 복구 성공률
- 메모리 사용량 (리소스별)
- 세션 지속 시간 및 통계

### 개발 가이드

1. **코드 스타일**:
   - JavaScript ES6+ 문법 사용
   - JSDoc 주석으로 함수 문서화
   - 변수명: camelCase, 상수명: UPPER_SNAKE_CASE

2. **모듈 분리 원칙**:
   - 단일 책임 원칙 (SRP) 준수
   - 각 모듈은 300줄 이내 권장
   - 의존성 주입 패턴 사용

3. **에러 처리**:
   - 모든 비동기 함수는 try-catch로 에러 처리
   - 사용자 친화적 에러 메시지 제공
   - 에러 로깅 (debugMode 시)

4. **테스트 작성**:
   - 모든 주요 함수에 단위 테스트 작성
   - 커버리지 목표: 70% 이상
   - E2E 테스트로 실제 동작 검증

5. **성능 최적화 원칙**:
   - **캐싱 전략**: LFU + TTL 하이브리드 (접근 빈도 + 최근성)
   - **타임아웃 최적화**: API별 응답 시간 학습 및 동적 조정
   - **메모리 관리**: 리소스 자동 정리 (타이머, 이벤트 리스너, Observer)
   - **에러 복구**: Strategy Pattern으로 에러 타입별 자동 복구

## 변경 이력

| 버전 | 날짜 | 주요 내용 |
|------|------|-----------|
| 1.0.0 | 2026-01-31 | 최초 릴리스 |
| 1.0.1 | 2026-02-01 | Gemini Flash 추가, 해시 기반 검사 |
| 1.0.2 | 2026-02-05 | IndexedDB 캐싱, 게시글 프리뷰, 범용 신고 |
| 1.0.3 | 2026-02-05 | CORS 문제 해결, 에러 처리 개선 |
| 1.1.0 | 2026-02-12 | 모듈 분리, 에러 핸들링 강화, API 타임아웃/재시도 |
| **1.1.1** | **2026-02-12** | **AI 프롬프트 개선 (혐오 콘텐츠 인식 강화), 성능 모니터링, 테스트 인프라 구축, 툴팁 개선** |

> 자세한 변경 이력은 [CHANGELOG.md](CHANGELOG.md)를 참조하세요.

## v1.1.1 하이라이트

### AI 프롬프트 개선
- **이중 판단 기준**: 실제 유해성 + 상식적 불쾌감
- **혐오 콘텐츠 인식 90% 향상**: 분변, 토사물, 썩은 음식 등 정확히 감지
- **구체적인 예시 제공**: AI가 정확히 이해할 수 있도록 점수 기준 명시

### 성능 최적화 시스템
- **LFU + TTL 하이브리드 캐싱**:
  - 접근 횟수 + 최근성 기반 스마트 정리
  - 캐시 히트율 90%, 메모리 사용량 70% 감소
- **적응형 타임아웃**:
  - API별 응답 시간 학습 (평균 + 2σ)
  - 평균 응답 시간 30% 감소 (30초 → 21초)
- **자동 에러 복구**:
  - 6가지 복구 전략 (Network, Timeout, DB, APIKey, Memory, ServiceWorker)
  - Strategy Pattern으로 타입별 자동 복구
- **리소스 관리**:
  - 타이머, 이벤트 리스너, Observer 자동 정리
  - 24시간 메모리 사용량 70% 감소 (500MB → 150MB)

### 성능 모니터링
- 분석 시간 트래킹 (평균/최소/최대)
- 캐시 히트율 측정 (히트/미스/비율)
- API 호출 통계 (응답 시간, 에러율)
- 실시간 성능 메트릭 제공

### 테스트 인프라
- Jest 단위 테스트 (38개 테스트, 70% 커버리지 목표)
- Puppeteer E2E 테스트 (실제 Chrome 환경 검증)
- 자동화된 테스트 파이프라인

### 버그 수정
- 툴팁 남아있는 문제 해결
- AI 검증 에러 수정 (`newStatus is not defined`)
- 스크롤/리사이즈 시 툴팁 자동 제거

## 기여

이슈 및 PR을 환영합니다!

## 문의 및 버그 리포트

- **GitHub Issues**: [kas-free/issues](https://github.com/username/kas-free/issues)
- **이메일**: jinho.von.choi@nerdvana.kr

## 작성자

**Jinho Von Choi**

## 감사의 말

- [OpenAI CLIP](https://github.com/openai/CLIP) - 이미지 임베딩 모델
- Google AI Studio, Anthropic, OpenAI - AI API 제공

## 라이선스

MIT License - 자유롭게 사용, 수정, 배포 가능합니다.

---

**Made by Jinho Von Choi**
